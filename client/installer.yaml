# This is a pod w/ restartPolicy=Never so that the installer only runs once.
apiVersion: v1
kind: Pod
metadata:
  name: gestalt-installer
  labels:
    gestalt-app: installer
spec:
  restartPolicy: Never
  containers:
  - name: gestalt-installer
    image: "galacticfog/gestalt-installer:razzy-test"
    imagePullPolicy: Always
    # 'deploy' arg signals deployment of gestalt platform
    # 'debug' arg signals debug output
    args: ["install", "debug"]
    volumeMounts:
    - mountPath: /config
      name: config
    - mountPath: /license
      name: license
  volumes:
    - name: config
      configMap:
        name: installer-config
    - name: license
      configMap:
        name: gestalt-license
